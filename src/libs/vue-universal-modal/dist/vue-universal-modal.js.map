{"version":3,"file":null,"sources":["../src/utils/bus.js","../src/close-icon.js","../src/modal.js","../src/modal-wrapper.js","../src/index.js"],"sourcesContent":["let instance = null;\n\nclass EventBus {\n  constructor() {\n    if (!instance) {\n      this.events = {};\n      instance = this;\n    }\n    return instance;\n  }\n\n  $emit(event, message) {\n    if (!this.events[event])\n      return;\n    const callbacks = this.events[event];\n    for (let i = 0, l = callbacks.length; i < l; i++) {\n      const callback = callbacks[i];\n      callback.call(this, message);\n    }\n  }\n\n  $on(event, callback) {\n    if (!this.events[event])\n      this.events[event] = [];\n    this.events[event].push(callback);\n  }\n}\n\nexport default new EventBus();","export default {\n  name: 'close-icon',\n  functional: true,\n  render(h) {\n    return h('svg', {\n      attrs: {\n        width: '12px',\n        height: '12px',\n        viewBox: '0 0 12 12',\n        xmlSpace: 'preserve'\n      }\n    }, [\n        h('line', {\n          attrs: {\n            x1: 1,\n            y1: 11,\n            x2: 11,\n            y2: 1\n          },\n          style: {\n            strokeLinecap: 'round',\n            strokeLinejoin: 'round',\n          }\n        }),\n        h('line', {\n          attrs: {\n            x1: 1,\n            y1: 1,\n            x2: 11,\n            y2: 11\n          },\n          style: {\n            strokeLinecap: 'round',\n            strokeLinejoin: 'round',\n          }\n        })\n    ])\n  }\n}","import CloseIcon from './close-icon'\nexport default {\n  name: 'vu-modal',\n  componentName: 'vu-modal',\n  props: {\n    title: {\n      type: String,\n      default: ''\n    },\n    className: {\n      type: String,\n      default: ''\n    },\n    isScroll: {\n      type: Boolean,\n      default: false\n    },\n    escapable: {\n      type: Boolean,\n      default: false\n    },\n    dismissable: {\n      type: Boolean,\n      default: true\n    },\n    fullscreen: {\n      type: Boolean,\n      default: false\n    },\n    isTop: {\n      type: Boolean,\n      default: false\n    },\n    isBottom: {\n      type: Boolean,\n      default: false\n    },\n    isLeft: {\n      type: Boolean,\n      default: false\n    },\n    isRight: {\n      type: Boolean,\n      default: false\n    },\n    center: {\n      type: Boolean,\n      default: false\n    },\n    size: {\n      type: String,\n      default: 'md'\n    },\n    bodyPadding: {\n      type: Boolean,\n      default: true\n    }\n  },\n  mounted() {\n    if(this.$el.focus) {\n      this.$el.focus()\n    }\n  },\n  computed: {\n    propsData() {\n      return (this.$parent.$vnode.data.props && this.$parent.$vnode.data.props.vModal) ? this.$parent.$vnode.data.props.vModal : this.$props\n    }\n  },\n  render(h) {\n    const { dismissable, title, isScroll, fullscreen, isTop, isBottom, isLeft, isRight, center, size, className, bodyPadding } = this.propsData\n\n    const closeBtn = dismissable \n      ? h('div', {\n            class: 'vu-modal__close-btn',\n            on: {\n              click: () => {this.$modals.dismiss()}\n            }\n        }, [h(CloseIcon)])\n      : null\n\n    const headerContent = this.$slots.header \n      ? this.$slots.header\n      : title \n        ? h('span', {class: ['vu-modal__cmp-header-title']}, title)\n        : null\n\n    const header = headerContent \n      ? h('div', { \n          class: ['vu-modal__cmp-header']\n        }, [ headerContent ]) \n      : null\n\n    const body = h('div', { \n      class: ['vu-modal__cmp-body'], \n      style: {\n        overflowY: isScroll ? 'auto' : null,\n        padding: bodyPadding ? '1em' : 0\n      }\n      }, [ this.$slots.default ])\n\n    const footer = this.$slots.footer \n      ? h('div', { \n          class: ['vu-modal__cmp-footer']\n        }, [ this.$slots.footer ]) \n      : null\n\n    let style = {}\n    let translateX = '-50%'\n    let translateY = '0'\n    if(center) {\n        translateX = '-50%'\n        translateY = '-50%'\n    }\n    if(isRight || isLeft) {\n        translateX = '0%'\n    }\n\n    if((isTop || isBottom) && !isScroll && !center) {\n        translateY = '0%'\n    }\n    style.transform = `translate(${translateX}, ${translateY})`\n\n    return h('div', { \n      style,\n      attrs: { tabindex: -1},\n      class: ['vu-modal__cmp', {\n          'vu-modal__cmp--is-fullscreen': fullscreen,\n          'vu-modal__cmp--is-center': center,\n          'vu-modal__cmp--is-top': isTop && !isScroll && !center,\n          'vu-modal__cmp--is-bottom': isBottom && !isScroll && !center,\n          'vu-modal__cmp--is-left': isLeft,\n          'vu-modal__cmp--is-right': isRight\n        }, \n        isScroll && fullscreen && 'vu-modal__cmp--is-scroll-fullscreen',\n        isScroll && !fullscreen && 'vu-modal__cmp--is-scroll',\n        !fullscreen && `vu-modal__cmp--${size}`,\n        className \n      ],\n      on: {click: (event) => {event.stopPropagation()}}\n    }, [\n      closeBtn,\n      header,\n      body,\n      footer\n    ])\n  }\n};\n","import './style.scss'\nimport Bus from './utils/bus'\nimport ModalCmp from './modal'\n\nexport default {\n  name: 'vu-modal-wrapper',\n  data () {\n    return {\n      modals: []\n    }\n  },\n  mounted() {\n    if (typeof document !== 'undefined') {\n      document.body.addEventListener('keydown', this.handleTabKey)\n    }\n\n    if (typeof document !== 'undefined') {\n      document.body.addEventListener('keyup', this.handleEscapeKey)\n    }\n  },\n  destroyed() {\n    if (typeof document !== 'undefined') {\n      document.body.removeEventListener('keydown', this.handleTabKey)\n    }\n\n     if (typeof document !== 'undefined') {\n      document.body.removeEventListener('keyup', this.handleEscapeKey)\n    }\n  },\n  created() {\n    Bus.$on('new', options => {\n      const defaults = {\n        title: '',\n        dismissable: true,\n        center: false,\n        fullscreen: false,\n        isTop: false,\n        isBottom: false,\n        isLeft: false,\n        isRight: false,\n        isScroll: false,\n        className: '',\n        size: 'md',\n        escapable: false,\n        bodyPadding: true,\n        onClose() {},\n        onDismiss() {}\n      };\n\n      let instance = {}\n      let rendered\n      if(options.component.template) {\n        rendered = false\n      } else {\n        rendered = options.component.render.call(this, this.$createElement)\n      }\n        \n      if(rendered && rendered.componentOptions && rendered.componentOptions.Ctor.extendOptions.componentName === 'vu-modal') {\n        const propsData = rendered.componentOptions.propsData\n        instance = {\n          isVmodal: true,\n          options: Object.assign(defaults, propsData, options)\n        }\n      } else {\n        instance = {\n          isVmodal: false,\n          options: Object.assign(defaults, options)\n        }\n      }\n      rendered = null\n\n      this.modals.push(instance);\n\n      Bus.$emit('opened', {\n        index: this.$last,\n        instance\n      });\n\n      this.body && this.body.classList.add('modals-open');\n    });\n\n    Bus.$on('close', data => {\n      let index = null;\n\n      if (data && data.$index)\n        index = data.$index;\n\n      if (index === null)\n        index = this.$last;\n\n      this.close(data, index);\n    });\n\n    Bus.$on('dismiss', index => {\n      if (index === null)\n        index = this.$last;\n\n      this.dismiss(index);\n    });\n  },\n  methods: {\n    splice(index = null) {\n      if (index === -1)\n        return;\n\n      if (!this.modals.length)\n        return;\n\n      if (index === null)\n        this.modals.pop();\n      else\n        this.modals.splice(index, 1);\n\n      if (!this.modals.length) {\n        this.body && this.body.classList.remove('modals-open');\n        Bus.$emit('destroyed');\n      }\n    },\n\n    doClose(index) {\n      if (!this.modals.length)\n        return;\n\n      if (!this.modals[index])\n        return;\n\n      this.splice(index);\n    },\n\n    close(data = null, index = null) {\n      if (this.modals.length === 0)\n        return;\n\n      let localIndex = index;\n\n      if (index && typeof index === 'function') {\n        localIndex = index(data, this.modals);\n      }\n\n      if (typeof localIndex !== 'number')\n        localIndex = this.$last;\n\n      Bus.$emit('closed', {\n        index: localIndex,\n        instance: this.modals[index],\n        data\n      });\n\n      if (localIndex !== false && this.modals[localIndex]) {\n        if(this.modals[localIndex].options.onClose(data) === false) {\n          return\n        }\n      }\n      this.doClose(localIndex);\n    },\n\n    dismiss(index = null) {\n      let localIndex = index;\n\n      if (index && typeof index === 'function')\n        localIndex = index(this.$last);\n\n      if (typeof localIndex !== 'number')\n        localIndex = this.$last;\n\n      if (this.modals[localIndex].options.onDismiss() === false)\n        return;\n\n      Bus.$emit('dismissed', {\n        index: localIndex,\n        instance: this.modals[localIndex]\n      });\n\n      this.doClose(localIndex);\n    },\n\n     handleTabKey(e) {\n       if (e.keyCode === 9 && this.modals.length) {\n         e.preventDefault()\n       }\n    },\n\n    handleEscapeKey(e) {\n      if (e.keyCode === 27 && this.modals.length) {\n        if (!this.modals.length)\n          return;\n        if (this.current.options.escapable)\n          this.dismiss();\n      }\n    }\n  },\n  computed: {\n    current() {\n      return this.modals[this.$last];\n    },\n    $last() {\n      return this.modals.length - 1;\n    },\n    body() {\n      if (typeof document !== 'undefined') {\n        return document.querySelector('body');\n      }\n    },\n    wrapperStyle() {\n      return {\n        'z-index': 5000 + this.$last + 1\n      }\n    }\n  },\n  render(h) {\n    if(!this.modals.length) {\n        return null\n    };\n\n    let modals = this.modals.map((modal, index) => {\n      let modalComponent \n\n      if(modal.isVmodal) {\n        modalComponent = h(modal.options.component, {\n          props: Object.assign({}, {vModal: Object.assign(modal.options, { disabled: index != this.$last })}, modal.options.props)\n       })\n      } else {\n        modalComponent = h(ModalCmp, {\n          props: Object.assign(modal.options, { disabled: index != this.$last })\n        }, [\n          h(modal.options.component, { \n            props: modal.options.props\n          })\n        ])\n      }\n      return h('div', {\n        class: ['vu-modal__mask', {'vu-modal__mask--disabled': index != this.$last }],\n        on: {click: () => {modal.options.dismissable && this.dismiss()}},\n        key: index\n      }, [ \n        modalComponent \n      ])\n    })\n\n    return h('div', {\n      class: 'vu-modal__wrapper',\n    }, [ modals ]) \n  }\n};\n\n\n","import Bus from './utils/bus';\nimport ModalWrapper from './modal-wrapper';\nimport Modal from './modal'\n\nconst VuModal = {}\nVuModal.install = (Vue) => {\n  Vue.prototype.$modals = new Vue({\n    name: '$modals',\n\n    created() {\n      Bus.$on('opened', data => {\n        this.$emit('modals:opened', data);\n      });\n\n      Bus.$on('closed', data => {\n        this.$emit('modals:closed', data);\n      });\n\n      Bus.$on('destroyed', data => {\n        this.$emit('modals:destroyed', data);\n      });\n\n      this.$on('new', options => {\n        this.open(options);\n      });\n\n      this.$on('close', data => {\n        this.close(data);\n      });\n\n      this.$on('dismiss', index => {\n        this.dismiss(index || null);\n      });\n    },\n\n    methods: {\n      open(options = null) {\n        Bus.$emit('new', options);\n      },\n\n      close(data = null) {\n        Bus.$emit('close', data);\n      },\n\n      dismiss(index = null) {\n        Bus.$emit('dismiss', index);\n      }\n    }\n  });\n\n  Vue.mixin({\n    created() {\n      this.$on('modals:new', options => {\n        Bus.$emit('new', options);\n      });\n\n      this.$on('modals:close', data => {\n        Bus.$emit('close', data);\n      });\n\n      this.$on('modals:dismiss', index => {\n        Bus.$emit('dismiss', index);\n      });\n    }\n  });\n}\n\nif (typeof window !== 'undefined' && window.Vue) {\n  window.Vue.use(VuModal);\n}\n\nexport default VuModal;\n\nexport {\n  ModalWrapper,\n  Modal,\n  Bus\n}\n\n"],"names":["instance","EventBus","events","event","message","callbacks","i","l","length","callback","call","push","h","String","Boolean","$el","focus","$parent","$vnode","data","props","vModal","$props","propsData","dismissable","title","isScroll","fullscreen","isTop","isBottom","isLeft","isRight","center","size","className","bodyPadding","closeBtn","$modals","dismiss","CloseIcon","headerContent","$slots","header","class","body","default","footer","style","translateX","translateY","transform","tabindex","click","stopPropagation","document","addEventListener","handleTabKey","handleEscapeKey","removeEventListener","$on","defaults","rendered","options","component","template","render","$createElement","componentOptions","Ctor","extendOptions","componentName","Object","assign","modals","$emit","$last","classList","add","index","$index","close","pop","splice","remove","localIndex","onClose","doClose","onDismiss","e","keyCode","preventDefault","current","escapable","querySelector","map","modal","modalComponent","isVmodal","disabled","ModalCmp","VuModal","install","Vue","prototype","open","mixin","window","use"],"mappings":"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"}