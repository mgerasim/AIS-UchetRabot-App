!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.VueUniversalModal=e.VueUniversalModal||{})}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var o=0;t.length>o;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),n=null,s=function(){function e(){return t(this,e),n||(this.events={},n=this),n}return o(e,[{key:"$emit",value:function(e,t){if(this.events[e])for(var o=this.events[e],n=0,s=o.length;s>n;n++){var i=o[n];i.call(this,t)}}},{key:"$on",value:function(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}}]),e}(),i=new s,l={name:"close-icon",functional:!0,render:function(e){return e("svg",{attrs:{width:"12px",height:"12px",viewBox:"0 0 12 12",xmlSpace:"preserve"}},[e("line",{attrs:{x1:1,y1:11,x2:11,y2:1},style:{strokeLinecap:"round",strokeLinejoin:"round"}}),e("line",{attrs:{x1:1,y1:1,x2:11,y2:11},style:{strokeLinecap:"round",strokeLinejoin:"round"}})])}},a={name:"vu-modal",componentName:"vu-modal",props:{title:{type:String,default:""},className:{type:String,default:""},isScroll:{type:Boolean,default:!1},escapable:{type:Boolean,default:!1},dismissable:{type:Boolean,default:!0},fullscreen:{type:Boolean,default:!1},isTop:{type:Boolean,default:!1},isBottom:{type:Boolean,default:!1},isLeft:{type:Boolean,default:!1},isRight:{type:Boolean,default:!1},center:{type:Boolean,default:!1},size:{type:String,default:"md"},bodyPadding:{type:Boolean,default:!0}},mounted:function(){this.$el.focus&&this.$el.focus()},computed:{propsData:function(){return this.$parent.$vnode.data.props&&this.$parent.$vnode.data.props.vModal?this.$parent.$vnode.data.props.vModal:this.$props}},render:function(e){var t=this,o=this.propsData,n=o.dismissable,s=o.title,i=o.isScroll,a=o.fullscreen,d=o.isTop,u=o.isBottom,c=o.isLeft,r=o.isRight,m=o.center,p=o.size,f=o.className,h=o.bodyPadding,v=n?e("div",{class:"vu-modal__close-btn",on:{click:function(){t.$modals.dismiss()}}},[e(l)]):null,y=this.$slots.header?this.$slots.header:s?e("span",{class:["vu-modal__cmp-header-title"]},s):null,$=y?e("div",{class:["vu-modal__cmp-header"]},[y]):null,b=e("div",{class:["vu-modal__cmp-body"],style:{overflowY:i?"auto":null,padding:h?"1em":0}},[this.$slots.default]),g=this.$slots.footer?e("div",{class:["vu-modal__cmp-footer"]},[this.$slots.footer]):null,_={},w="-50%",x="0";return m&&(w="-50%",x="-50%"),(r||c)&&(w="0%"),!d&&!u||i||m||(x="0%"),_.transform="translate("+w+", "+x+")",e("div",{style:_,attrs:{tabindex:-1},class:["vu-modal__cmp",{"vu-modal__cmp--is-fullscreen":a,"vu-modal__cmp--is-center":m,"vu-modal__cmp--is-top":d&&!i&&!m,"vu-modal__cmp--is-bottom":u&&!i&&!m,"vu-modal__cmp--is-left":c,"vu-modal__cmp--is-right":r},i&&a&&"vu-modal__cmp--is-scroll-fullscreen",i&&!a&&"vu-modal__cmp--is-scroll",!a&&"vu-modal__cmp--"+p,f],on:{click:function(e){e.stopPropagation()}}},[v,$,b,g])}},d={name:"vu-modal-wrapper",data:function(){return{modals:[]}},mounted:function(){"undefined"!=typeof document&&document.body.addEventListener("keydown",this.handleTabKey),"undefined"!=typeof document&&document.body.addEventListener("keyup",this.handleEscapeKey)},destroyed:function(){"undefined"!=typeof document&&document.body.removeEventListener("keydown",this.handleTabKey),"undefined"!=typeof document&&document.body.removeEventListener("keyup",this.handleEscapeKey)},created:function(){var e=this;i.$on("new",function(t){var o={title:"",dismissable:!0,center:!1,fullscreen:!1,isTop:!1,isBottom:!1,isLeft:!1,isRight:!1,isScroll:!1,className:"",size:"md",escapable:!1,bodyPadding:!0,onClose:function(){},onDismiss:function(){}},n={},s=void 0;if((s=!t.component.template&&t.component.render.call(e,e.$createElement))&&s.componentOptions&&"vu-modal"===s.componentOptions.Ctor.extendOptions.componentName){var l=s.componentOptions.propsData;n={isVmodal:!0,options:Object.assign(o,l,t)}}else n={isVmodal:!1,options:Object.assign(o,t)};s=null,e.modals.push(n),i.$emit("opened",{index:e.$last,instance:n}),e.body&&e.body.classList.add("modals-open")}),i.$on("close",function(t){var o=null;t&&t.$index&&(o=t.$index),null===o&&(o=e.$last),e.close(t,o)}),i.$on("dismiss",function(t){null===t&&(t=e.$last),e.dismiss(t)})},methods:{splice:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;-1!==e&&this.modals.length&&(null===e?this.modals.pop():this.modals.splice(e,1),this.modals.length||(this.body&&this.body.classList.remove("modals-open"),i.$emit("destroyed")))},doClose:function(e){this.modals.length&&this.modals[e]&&this.splice(e)},close:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(0!==this.modals.length){var o=t;t&&"function"==typeof t&&(o=t(e,this.modals)),"number"!=typeof o&&(o=this.$last),i.$emit("closed",{index:o,instance:this.modals[t],data:e}),!1!==o&&this.modals[o]&&!1===this.modals[o].options.onClose(e)||this.doClose(o)}},dismiss:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e;e&&"function"==typeof e&&(t=e(this.$last)),"number"!=typeof t&&(t=this.$last),!1!==this.modals[t].options.onDismiss()&&(i.$emit("dismissed",{index:t,instance:this.modals[t]}),this.doClose(t))},handleTabKey:function(e){9===e.keyCode&&this.modals.length&&e.preventDefault()},handleEscapeKey:function(e){if(27===e.keyCode&&this.modals.length){if(!this.modals.length)return;this.current.options.escapable&&this.dismiss()}}},computed:{current:function(){return this.modals[this.$last]},$last:function(){return this.modals.length-1},body:function(){if("undefined"!=typeof document)return document.querySelector("body")},wrapperStyle:function(){return{"z-index":5e3+this.$last+1}}},render:function(e){var t=this;if(!this.modals.length)return null;var o=this.modals.map(function(o,n){var s=void 0;return s=o.isVmodal?e(o.options.component,{props:Object.assign({},{vModal:Object.assign(o.options,{disabled:n!=t.$last})},o.options.props)}):e(a,{props:Object.assign(o.options,{disabled:n!=t.$last})},[e(o.options.component,{props:o.options.props})]),e("div",{class:["vu-modal__mask",{"vu-modal__mask--disabled":n!=t.$last}],on:{click:function(){o.options.dismissable&&t.dismiss()}},key:n},[s])});return e("div",{class:"vu-modal__wrapper"},[o])}},u={};u.install=function(e){e.prototype.$modals=new e({name:"$modals",created:function(){var e=this;i.$on("opened",function(t){e.$emit("modals:opened",t)}),i.$on("closed",function(t){e.$emit("modals:closed",t)}),i.$on("destroyed",function(t){e.$emit("modals:destroyed",t)}),this.$on("new",function(t){e.open(t)}),this.$on("close",function(t){e.close(t)}),this.$on("dismiss",function(t){e.dismiss(t||null)})},methods:{open:function(){i.$emit("new",arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)},close:function(){i.$emit("close",arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)},dismiss:function(){i.$emit("dismiss",arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}}}),e.mixin({created:function(){this.$on("modals:new",function(e){i.$emit("new",e)}),this.$on("modals:close",function(e){i.$emit("close",e)}),this.$on("modals:dismiss",function(e){i.$emit("dismiss",e)})}})},"undefined"!=typeof window&&window.Vue&&window.Vue.use(u),e.default=u,e.ModalWrapper=d,e.Modal=a,e.Bus=i,Object.defineProperty(e,"__esModule",{value:!0})});
